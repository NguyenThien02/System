# Using ‘grep’, ‘sed’, ‘awk'

## 1. Grep

### 1.1: grep là gì ?

`grep` dùng để tìm chuỗi trong file chỉ định 
**Cách tìm kiếm thông thường**
```
grep "chuỗi tìm kiếm" filename
```
**Tìm kiếm chuỗi trong nhiều file cùng một lúc**
```
grep 'chuỗi tìm kiếm' filename1 filename2 ...
```
**Cấu trúc:**
```
grep [options] pattern [FILE]
```
- [options]: tùy chọn của lệnh Grep
- pattern: mẫu tìm kiếm
- [FILE]: file thực hiện tìm kiếm

### 1.2. Các tùy chọn trong grep
**`-i` //tìm kiếm không phân biết chữ hoa chữ thường**

**`-l` //hiển thị tên tệp phù hợp với mẫu**

**`-w` //tìm kiếm toàn bộ từ trong tệp**
Ví dụ: grep -w "bizflycloud" example1.txt. Lệnh trên sẽ tìm kiếm các dòng trong file example1.txt chứa từ "bizflycloud" mà không có các tiền tố hoặc hậu tố ví dụ như "bizflycloudserver", "bizflycloudlms"

#### `-v`	//tìm kiếm ngược 

```
grep -v 'chuỗi tìm kiếm' filename
```

Ví dụ: grep -v "bizflycloud" example.txt. Kết quả sẽ cho ra những dòng không có chứa chuỗi tìm kiếm ""bizflycloud".

#### `-n`	//hiển thị số thứ tự các dòng cùng kết quả 

Ví dụ: grep -n "bizflycloud" example.txt. Số thứ tự của dòng có chứa kết quả sẽ được hiển thị ở đầu dòng. và đánh dấu khác màu.

#### `-m` 	//giới hạn output của một số dòng nhất định 

```
grep -m [number] filename
```

Ví dụ: grep -m 5 "bizflycloud" example.txt. Câu lệnh này sẽ chỉ hiện thị 5 dòng đầu tiên có chứa chuỗi "bizflycloud".

#### `-c` 	//đếm số lần xuất hiện của chuỗi trong tệp

#### `-E` hoặc `-P`	//tìm kiếm chuỗi sử dụng biểu thức chính quy 

Ví dụ: Tìm kiếm bắt đầu bằng chữ "b" trong file example.txt sử dụng biểu thức chính quy, sử dụng câu lệnh như sau:

```
grep -E '^b' filename
```

xem cách viết biểu thức chính quy tại [đây](https://xuanthulab.net/bieu-thuc-chinh-quy-regexp.html)

## 2. sed
Nó được sử dụng để sửa đổi nội dung của một tệp, thường đặt nội dung vào một tệp mới.

#### 2.1. Cấu trúc của lệnh sed

```
sed [options] 'command' file
```

- `[options]`: Các tùy chọn điều khiển cách `sed` hoạt động.
- `'command'`: Lệnh hoặc chuỗi lệnh xử lý trên văn bản.
- `file`: Tên file văn bản mà `sed` sẽ chỉnh sửa.

### 2.2. Các comands trong sed

#### `s`	//(substitude): Thay thế chuỗi văn bản 

```
sed 's/foo/bar/' filename
```

- `s/foo/bar/`: Thay thế lần xuất hiện đầu tiên của "foo" thành "bar" trong mỗi dòng.
- `s/foo/bar/g`: Thay thế tất cả các lần xuất hiện của "foo" thành "bar" trong mỗi dòng.
- `s/foo/bar/2`: Chỉ thay thế lần xuất hiện thứ hai của "foo" trong mỗi dòng.


Theo mặc định về bản chất set chỉ hiễn thị những chỗ được thay thế chứ không thực sự sửa file đó, để sử file thì cần phải thêm tùy chọn `-i` điêu này đúng cho mọi option trong sed 



**`p`	// (print) in ra dòng đã được thay đổi. Thường dùng với `-n` để chỉ in ra dòng đã thay đổi**

```
sed -n 's/foo/bar/p' file.txt
```

**`d` 	// delete - xóa dòng thỏa mãn điều kiện **

```
sed '/foo/d' file.txt
```

**`a`	//append : thêm một chuỗi vào sau dòng được chỉ định **

```
sed '/foo/a\Them dong moi' file.txt
```

tứ là dòng nào chứ kí tự điều kiện thì sed sẽ thêm một dòng mới chứa chuỗi điều kiện.

**`i` 	//insert : chèn 1 chuỗi vào trước dòng được chỉ định **
```
sed '/foo/i\Chen dong moi' file.txt
```

**`c`	// (Change): Thay thế toàn bộ dòng bằng chuỗi mới nếu thỏa mãn điều kiện.**

```
sed '/foo/c\Thay the toan bo dong' file.txt
```

lệnh này sẽ thay thế toán bộ dòng chứa kí tự điều kiện 

****`y`**	// (Transform): Chuyển đổi các ký tự (giống như lệnh `tr`).**
```
sed 'y/abc/ABC/' file.txt
```

****`q`** 	//(Quit): Kết thúc `sed` sau khi đã thực hiện đến dòng được chỉ định.**

```
sed '10q' file.txt
```

****`r`** 	//(Read): Đọc nội dung từ file khác và chèn vào.**

```
sed '/foo/r anotherfile.txt' file.txt
```

****`w`** 	//(Write): Ghi những dòng đã xử lý vào một file khác.**

```
sed '/foo/w output.txt' file.txt
```
### 2.3. Các option của lệnh sed

**`-e`: Cho phép dùng nhiều lệnh sed trong một dòng. **
Mỗi lệnh phải được xác định sau `-e`.
```
sed -e 's/foo/bar/' -e 's/hello/world/' file.txt
```

**`-i` // Chỉnh sửa trực tiếp trên file mà không tạo file tạm**
```
sed -i 's/foo/bar/' file.txt
```

**`-n` // Chỉ in những dòng đã được thay đổi.**
```
sed -n 's/foo/bar/p' file.txt
```
**`-f` //Đọc các lệnh sed từ một file thay vì dòng lệnh**
```
sed -f commands.sed file.txt
```
Lệnh này sử dụng sed để đọc các lệnh từ file commands.sed và áp dụng chúng lên file.txt.

**`-r` // sử dụng biểu thức chính quy**
```
sed -r 's/[0-9]+/number/g' file.txt
```
xem cách sử dụng biểu thức chính quy tại [đây](https://topdev.vn/blog/regex-la-gi/?utm_source=google&utm_medium=cpc&utm_campaign=pmax-branding&utm_content=performance&gad_source=1&gclid=Cj0KCQjwvpy5BhDTARIsAHSilykWMYAzsZhPNbfEMCMuPSJqbAX-eWOCEkCe3oL7Io-iqIuEEddkM8QaAmtSEALw_wcB)

**`-z`: //Đọc toàn bộ file vào như một chuỗi đơn, thay vì theo dòng.**
```
sed -z 's/foo/bar/' file.txt
```
Lệnh này sử dụng sed để thay thế "foo" thành "bar" trong toàn bộ nội dung file file.txt, nhưng với cách đọc toàn bộ tệp như một chuỗi đơn thay vì từng dòng riêng lẻ.

## 3. awk
AWK là một ngôn ngữ lập trình hướng dữ liệu, thường được dùng cho việc xử lý dữ liệu text dựa trên việc tìm kiếm mẫu dữ liệu. Dữ liệu đầu vào được chia thành các bản ghi (dòng), mỗi bản ghi được chia thành các trường (cột). AWK thường được dùng để lọc và chuẩn hóa dữ liệu đầu ra từ dữ liệu đầu vào ban đầu.

### 3.1. Quy trình hoạt động
awk tuân theo quy trình làm việc Read, Execute, Repeat 
![68747470733a2f2f696d616765732e7669626c6f2e617369612f66756c6c2f38386234323430372d353333302d343430362d396161362d6531646361373933376662322e6a7067](https://github.com/user-attachments/assets/a8389cdb-97ac-4b7b-aeb9-05a999f4aa8d)

1. Read awk đọc một dòng từ input (file, pipe, or stdin) và lưu trữ trong bộ nhớ.
2. Excute tất cả các lệnh AWK được áp dụng tuần tự từ đầu đến cuối. Theo mặc đinh, AWK thực hiện các lệnh trên mọi dòng.
3. Repeat quá trình này lặp đi lặp lại đến khi file kết thúc

AWK xem một file text giống như 1 bảng dữ liệu, bao gồm các bản ghi và các trường, khoảng cách giữa các đoạn text là một cột, AWK chỉ làm việc với các file text 

### 3.2. Cấu trúc lệnh awk













